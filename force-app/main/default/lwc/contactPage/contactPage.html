<template>
  <lightning-card variant="Narrow" title="Contact" icon-name="standard:contact">
    <div class="slds-m-top_medium slds-m-bottom_x-large" slot="actions">
      <!-- Button group: simple buttons -->
      <lightning-button-group>
        <lightning-button label="Refresh"></lightning-button>

        <lightning-button
          label="New"
          name="newButton"
          data-toggle="modal"
          data-target="#modal"
          onclick={handleClick}
        ></lightning-button>
      </lightning-button-group>
    </div>

    <!-- cities filter -->

    <div class="slds-m-around_large">
      <template if:true={cities}>
        <lightning-combobox
          name="cities"
          label="Cities"
          value={cityName}
          options={cities}
          onchange={handleChange}
        >
        </lightning-combobox>
      </template>
    </div>

    <!-- Data Table -->
    <template if:true={contacts}>
      <lightning-datatable
        key-field="id"
        data={contacts}
        show-row-number-column
        columns={columns}
        onrowaction={handleRowAction}
        sorted-by={sortBy}
        sorted-direction={sortDirection}
        onsort={handleSortData}
        onclick={handleClick}
        hide-checkbox-column
      >
      </lightning-datatable
    ></template>
  </lightning-card>

  <!-- New Contact Modal -->
  
  <template if:true={isModalOpened}>
    
      <section
        role="dialog"
        tabindex="-1"
        aria-label="modal-heading-01"
        aria-modal="true"
        aria-describedby="modal-content-id-1"
        class="slds-modal slds-fade-in-open"
      >
      
        <div class="slds-modal__container" id="modal">
          <template if:true={modalSaveButton}>
          <header class="slds-modal__header">
          <h2 class="slds-modal__title slds-hyphenate">Create New Contact</h2>
          </header>
          </template>
          <template if:false={modalSaveButton}>
          <header class="slds-modal__header">
          <h2 class="slds-modal__title slds-hyphenate">Edit Contact</h2>
          </header>
          </template>

          <div
            class="slds-modal__content slds-p-around_medium"
            id="modal-content-id-1"
          >
          <template if:true={modalSaveButton}>
            <lightning-input
              type="text"
              variant="standard"
              name="firstName"
              data-id="firstName"
              label="First Name"
              value={firstName}
              onchange={handleChange}
              placeholder="type here..."
            ></lightning-input>
            <lightning-input
              type="text"
              variant="standard"
              name="lastName"
              data-id="lastName"
              label="Last Name"
              value={lastName}
              onchange={handleChange}
              placeholder="type here..."
              required
            ></lightning-input>

            <lightning-combobox
              name="account"
              label="Account"
              data-id="selectedAccountsId"
              value={selectedAccountsId}
              placeholder="Select Account"
              options={comboboxAccounts}
              onchange={handleChange}
              required
            ></lightning-combobox>

            <lightning-input
              type="email"
              variant="standard"
              name="email"
              data-id="email"
              label="Email"
              value={email}
              onchange={handleChange}
              placeholder="type here..."
              required
            ></lightning-input>
            <lightning-input
              type="phone"
              variant="standard"
              name="phone"
              data-id="phone"
              label="Phone"
              value={phone}
              onchange={handleChange}
              placeholder="type here..."
            ></lightning-input>
            </template>

            <template if:false={modalSaveButton}>
            <lightning-input
              type="text"
              variant="standard"
              name="firstName"
              data-id="firstName"
              label="First Name"
              value={firstName}
              onchange={handleChange}
              placeholder={firstName}
            ></lightning-input>
            <lightning-input
              type="text"
              variant="standard"
              name="lastName"
              data-id="lastName"
              label="Last Name"
              value={lastName}
              onchange={handleChange}
              placeholder={lastName}
              required
            ></lightning-input>

            <lightning-combobox
              name="account"
              label="Account"
              data-id="selectedAccountsId"
              value={selectedAccountsId}
              placeholder={selectedAccountName}
              options={comboboxAccounts}
              onchange={handleChange}
              disabled
            ></lightning-combobox>

            <lightning-input
              type="email"
              variant="standard"
              name="email"
              data-id="email"
              label="Email"
              value={email}
              onchange={handleChange}
              placeholder={email}
              required
            ></lightning-input>
            <lightning-input
              type="phone"
              variant="standard"
              name="phone"
              data-id="phone"
              label="Phone"
              value={phone}
              onchange={handleChange}
              placeholder={phone}
            ></lightning-input>
            </template>
          </div>

          <footer class="slds-modal__footer">
            <template if:true={modalSaveButton}>
            <lightning-button
              variant="brand"
              label="Save"
              title="save"
              onclick={handleClick}
            ></lightning-button>
          </template>
          <template if:false={modalSaveButton}>
            <lightning-button
              variant="brand"
              label="Update"
              title="Update"
              onclick={handleClick}
            ></lightning-button>
          </template>
            &nbsp;&nbsp;
            <lightning-button
              variant="destructive"
              label="Close"
              title="close"
              onclick={handleClick}
            ></lightning-button>
          </footer>
        </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
      </template
  ></template>
</template>
 
  
</template>